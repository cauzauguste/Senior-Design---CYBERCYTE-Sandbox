# Replace with your actual credentials and host
export SUPABASE_DB_URL="postgresql://[USER]:[PASSWORD]@[HOST]:[PORT]/[DATABASE]"
export SUPABASE_TABLE_NAME="host_telemetry"

# If your Supabase/PostgreSQL uses a CA certificate, set this path:
# export SUPABASE_CA_FILE="/path/to/your/supabase-ca.crt"


# Replace with your Kafka broker address (e.g., 'kafka-host:9092')
export KAFKA_BROKER="[YOUR_KAFKA_BROKER_HOST]:[PORT]"
export KAFKA_TOPIC="osquery_logs"

# If your Kafka uses SSL/TLS for security, set the paths to the certificate files:
# export KAFKA_CA_FILE="/path/to/your/kafka-ca.crt"
# export KAFKA_CERT_FILE="/path/to/your/client.crt"
# export KAFKA_KEY_FILE="/path/to/your/client.key"


-- SQL to create the table (adapt as necessary for your setup)
CREATE TABLE IF NOT EXISTS host_telemetry (
    id SERIAL PRIMARY KEY,
    payload JSONB NOT NULL,
    timestamp_processed TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW()
);